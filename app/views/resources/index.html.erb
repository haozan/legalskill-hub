<%# WEBSITE RESOURCES — Tech Agent dark UI %>
<div class="bg-surface min-h-screen">
  <!-- Header -->
  <div class="border-b border-border bg-surface-elevated">
    <div class="container-xl mx-auto px-6 py-10">
      <div class="sys-label mb-3">// TRAINING_LIBRARY :: WEBSITE_INDEX</div>
      <h1 class="section-title">网站资源库</h1>
      <p class="section-subtitle mt-2">精选法律学习与实践网站，助力专业成长</p>
    </div>
  </div>

  <!-- Tag Filter — sticky bar -->
  <div class="border-b border-border bg-surface sticky top-14 z-10">
    <div class="container-xl mx-auto px-6 py-4">
      <div class="flex flex-wrap gap-2">
        <%= link_to resources_path,
              class: "category-pill #{params[:tag].blank? ? 'active' : ''}" do %>
          ALL
        <% end %>
        <% Resource::RESOURCE_TAG_NAMES.each do |tag_key, tag_name| %>
          <%= link_to resources_path(tag: tag_key),
                class: "category-pill #{params[:tag] == tag_key ? 'active' : ''}" do %>
            <%= tag_name %>
          <% end %>
        <% end %>
      </div>
    </div>
  </div>

  <!-- Website Resources Grid -->
  <div class="container-xl mx-auto px-6 py-10">
    <% if @resources.any? %>
      <div class="grid md:grid-cols-2 gap-3 mb-10">
        <% @resources.each do |resource| %>
          <%= link_to resource.url, 
                target: "_blank", 
                rel: "noopener noreferrer",
                class: "block group bg-surface-elevated border border-border hover:border-primary/50 p-5 transition-all duration-200" do %>
            <div class="flex items-start gap-4">
              <div class="flex-shrink-0 w-12 h-12 border border-primary/30 flex items-center justify-center bg-primary/5 group-hover:bg-primary/10 transition-colors">
                <%= lucide_icon "link", class: "w-6 h-6 text-primary" %>
              </div>
              <div class="flex-1 min-w-0">
                <div class="flex items-start justify-between gap-2 mb-2">
                  <h3 class="font-sans text-base font-semibold text-primary group-hover:text-primary-light transition-colors">
                    <%= resource.title %>
                  </h3>
                  <%= lucide_icon "external-link", class: "flex-shrink-0 w-4 h-4 text-muted group-hover:text-primary transition-colors" %>
                </div>
                <% if resource.description.present? %>
                  <p class="text-sm text-secondary leading-relaxed mb-3"><%= resource.description %></p>
                <% end %>
                <% if resource.resource_tag.present? %>
                  <span class="inline-block px-2 py-0.5 bg-primary/10 border border-primary/30 text-xs font-mono text-primary">
                    <%= resource.tag_name %>
                  </span>
                <% end %>
              </div>
            </div>
          <% end %>
        <% end %>
      </div>

      <div class="flex justify-center">
        <%= paginate @resources %>
      </div>
    <% else %>
      <div class="text-center py-24 border border-border bg-surface-elevated">
        <div class="inline-flex items-center justify-center w-12 h-12 border border-border mb-6">
          <%= lucide_icon "link-off", class: "w-5 h-5 text-muted" %>
        </div>
        <div class="sys-label mb-3 justify-center flex">// NO_CONTENT</div>
        <p class="text-secondary text-sm">暂无网站资源</p>
      </div>
    <% end %>
  </div>
</div>
